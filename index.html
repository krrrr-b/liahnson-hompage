<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Liahnson website">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Expires" content="0">
</head>

<body style="margin: 0px;">
    <iframe class="ifr" id="liahnson" src="https://www.liahnson.com/react/" style="position: absolute; width: 100%; height: 100%; border: none;" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    <span id="page"></span>
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <script>
        $(function() {
            if (document.location.protocol === 'https:') {
                // console.log('https connected');
                // document.location.href = document.location.href.replace('https:', 'http:');
            }

            // 메시지 수신 이벤트 등록
            window.addEventListener('message', handleDocHeightMsg, false);

            // 메시지 수신 처리를 위한 함수
		    function handleDocHeightMsg(eventObj) {
		    	setCookie("page", eventObj.data, 1);

                var replaceUrl = eventObj.data
                    .replace('page=react', '')
                    .replace('index-react.html', '/')
                    .replace("page=lang", "lang")
                    .replace("/&", "&")
                    .replace("page=", "")
                    .replace("&lang=ko", "")
                    .replace("&lang=en", "")
                    ;

                if (replaceUrl == "terms" || replaceUrl == "privacy" || replaceUrl == "cookie" || replaceUrl == "compliance") {
                    location.reload();
                }
		    }

		    var pathname = getCookie("page");
		    if (pathname !== "" && pathname !== null && pathname !== undefined) {
                var replaceUrl = pathname
                    .replace('page=react', '')
                    .replace('index-react.html', '/')
                    .replace("page=lang", "lang")
                    .replace("/&", "&");
	   //          const urlParams = getUrlParams(pathname);
	   //          let path = urlParams['path'];
	   //          const lang = urlParams['lang'];

				// let pathname = "";
	   //          if (path !== undefined) {
	   //              pathname += ("/" + path);
	   //          }

	   //          if (lang !== undefined) {
	   //              pathname += "?lang=" + lang;
	   //          }

	   			if (replaceUrl.trim() !== '/' && replaceUrl.trim() !== '') {
		            // console.log('url: ' + replaceUrl);
	            	$('#liahnson').attr('src', 'https://www.liahnson.com/react?' + replaceUrl);
	   			}
		    }

            // 쿠키 생성 함수
            function setCookie(cName, cValue, cDay) {
                var expire = new Date();
                expire.setDate(expire.getDate() + cDay);
                cookies = cName + '=' + escape(cValue) + '; path=/ '; // 한글 깨짐을 막기위해 escape(cValue)를 합니다.
                if (typeof cDay != 'undefined') cookies += ';expires=' + expire.toGMTString() + ';';
                document.cookie = cookies;
            }

            // 쿠키 가져오기 함수
            function getCookie(cName) {
                cName = cName + '=';
                var cookieData = document.cookie;
                var start = cookieData.indexOf(cName);
                var cValue = '';
                if (start != -1) {
                    start += cName.length;
                    var end = cookieData.indexOf(';', start);
                    if (end == -1) end = cookieData.length;
                    cValue = cookieData.substring(start, end);
                }
                return unescape(cValue);
            }
        });
    </script>
</body>